<<<<<<< HEAD
=======
<?xml version="1.0" encoding="utf-8"?>
>>>>>>> caca6b2872ea7009554fa3da87c15fa6b3ed7290
<odoo>
       <!-- Vista tipo lista: movimientos ligados a órdenes de reparación -->
       <record id="view_stock_move_repair_list" model="ir.ui.view">
           <field name="name">stock.move.repair.list</field>
           <field name="model">stock.move</field>
           <field name="mode">primary</field>
           <field name="arch" type="xml">
               <list string="Piezas" create="false" delete="false">
                   <field name="repair_state"/>
                   <field name="partner_repair_id"/>
                   <field name="estado_recambio"/>
                   <field name="repair_id"/>               
                   <field name="product_id"/>
                   <field name="product_uom_qty"/>
                   <field name="quantity"/>
                   <field name="location_id"/>
                   <field name="repair_line_type"/>
                   <field name="forecast_availability"/>
                   <field name="picked"/>
                   <button type="object" name="action_product_forecast_report" title="Forecast Report" icon="fa-area-chart" invisible="forecast_availability &lt; 0 and repair_line_type == 'add'"/>
                   <button type="object" name="action_product_forecast_report" title="Forecast Report" icon="fa-area-chart text-danger" invisible="forecast_availability &gt;= 0 or repair_line_type != 'add'"/>
                   <field name="forecast_availability" string="Forecasted" widget="forecast_widget"/>
               </list>
           </field>
       </record>


       <!-- Vista tipo lista: movimientos ligados a órdenes de reparación -->
       <record id="view_repair_order_repair_consult_list" model="ir.ui.view">
           <field name="name">repair.order.repair.consult.list</field>
           <field name="model">repair.consulta</field>
           <field name="mode">primary</field>
           <field name="arch" type="xml">
               <list string="Consultas" create="false" delete="false">
                   <field name="repair_order_id"/>
                   <field name="consulta_text"/>
                   <field name="refer"/>
                   <field name="product_id"/>
                   <field name="product_uom_qty"/>
                   <field name="picked"/>
                   <button string="Crear Producto" type="object" name="action_create_product" 
                                        invisible="product_id != False" class="btn-primary"/>
                    <button string="Añadir a Reparación" type="object" name="action_add_to_repair_lines" 
                                        invisible="product_id == False" class="btn-primary"/>
               </list>
           </field>
       </record>

       <!-- Acción de ventana -->
       <record id="action_stock_move_repair_list" model="ir.actions.act_window">
           <field name="name">Piezas</field>
           <field name="res_model">stock.move</field>
           <field name="view_mode">list</field>
           <field name="view_id" ref="view_stock_move_repair_list"/>
           <field name="domain">[('repair_id', '!=', False)]</field>
           <field name="context">{'default_repair_state': 'confirmed'}</field>
           <field name="help" type="html">
               <p>Aquí puedes consultar todos los productos que se han añadido o retirado en las órdenes de reparación con estado no recogido.</p>
           </field>
       </record>

       <!-- Acción de ventana -->
       <record id="action_repair_order_repair_consult_list" model="ir.actions.act_window">
           <field name="name">Consultas</field>
           <field name="res_model">repair.consulta</field>
           <field name="view_mode">list</field>
           <field name="view_id" ref="view_repair_order_repair_consult_list"/>
           <field name="help" type="html">
               <p>Aquí puedes consultar todos los productos que se han añadido o retirado en las órdenes de reparación.</p>
           </field>
       </record>

       <!-- Menú bajo Reparaciones -->
       <menuitem id="menu_stock_move_repair_list"
                 name="Piezas"
                 parent="repair.menu_repair_order"
                 action="action_stock_move_repair_list"
                 sequence="50"/>

       <menuitem id="menu_repair_order_repair_consult_list"
                 name="Consultas"
                 parent="repair.menu_repair_order"
                 action="action_repair_order_repair_consult_list"
                 sequence="60"/>
   </odoo>
